{% extends 'base.html' %}

{% block title %}Como Come√ßar - EuT√¥NaFila{% endblock %}

{% block extra_css %}
.instruction-panel {
    background-color: white;
    border-radius: 10px;
    padding: 25px;
    margin-bottom: 30px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.step-number {
    display: inline-block;
    width: 30px;
    height: 30px;
    background-color: var(--primary-color);
    color: white;
    border-radius: 50%;
    text-align: center;
    line-height: 30px;
    margin-right: 10px;
}

.instruction-header {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
}

.instruction-img {
    max-width: 100%;
    border: 1px solid #ddd;
    border-radius: 5px;
    margin: 15px 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.code-block {
    background-color: #f8f9fa;
    padding: 15px;
    border-radius: 5px;
    font-family: monospace;
    margin: 15px 0;
    overflow-x: auto;
}

.alert-tip {
    background-color: #e7f5fe;
    border-left: 4px solid var(--primary-color);
    padding: 15px;
    margin: 15px 0;
}

.alert-warning {
    background-color: #fff3cd;
    border-left: 4px solid #ffc107;
    padding: 15px;
    margin: 15px 0;
}

.nav-pills .nav-link.active {
    background-color: var(--primary-color);
}
{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-12">
            <h1 class="mb-4">Como Come√ßar com o EuT√¥NaFila</h1>
            <p class="lead">Siga este guia passo a passo para configurar e come√ßar a usar o sistema de gerenciamento de filas para sua barbearia.</p>
        </div>
    </div>
    
    <div class="row mt-4">
        <div class="col-md-3">
            <div class="sticky-top pt-4">
                <div class="list-group">
                    <a class="list-group-item list-group-item-action" href="#iniciar-servidor">1. Iniciando o Servidor</a>
                    <a class="list-group-item list-group-item-action" href="#acessar-admin">2. Acessando o Admin</a>
                    <a class="list-group-item list-group-item-action" href="#criar-barbearia">3. Criando sua Barbearia</a>
                    <a class="list-group-item list-group-item-action" href="#adicionar-servicos">4. Adicionando Servi√ßos</a>
                    <a class="list-group-item list-group-item-action" href="#testar-checkin">5. Testando o Check-in</a>
                    <a class="list-group-item list-group-item-action" href="#dashboard">6. Usando o Dashboard</a>
                    <a class="list-group-item list-group-item-action" href="#tempo-real">7. Atualiza√ß√µes em Tempo Real</a>
                    <a class="list-group-item list-group-item-action" href="#solucao-problemas">Solu√ß√£o de Problemas</a>
                </div>
            </div>
        </div>
        
        <div class="col-md-9">
            <!-- Iniciando o Servidor -->
            <div id="iniciar-servidor" class="instruction-panel">
                <div class="instruction-header">
                    <span class="step-number">1</span>
                    <h2>Iniciando o Servidor</h2>
                </div>
                
                <p>O primeiro passo √© iniciar o servidor Django para poder acessar o sistema. Voc√™ tem duas op√ß√µes:</p>
                
                <h4>Op√ß√£o 1: Usando o Arquivo Batch</h4>
                <p>A forma mais f√°cil √© usar o arquivo batch que criamos:</p>
                <ol>
                    <li>Localize o arquivo <code>start_server.bat</code> na pasta raiz do projeto</li>
                    <li>D√™ um duplo clique para execut√°-lo</li>
                    <li>Uma janela de terminal ser√° aberta e o servidor ser√° iniciado automaticamente</li>
                </ol>
                
                <h4>Op√ß√£o 2: Manualmente pelo Terminal</h4>
                <p>Se preferir usar o terminal, execute os seguintes comandos:</p>
                <div class="code-block">
                    cd C:\repos\nafila\eutonafila<br>
                    python manage.py runserver
                </div>
                
                <div class="alert-warning">
                    <h5>‚ö†Ô∏è Aten√ß√£o!</h5>
                    <p>O arquivo <code>manage.py</code> est√° dentro da pasta <code>eutonafila</code>, ent√£o todos os comandos devem ser executados a partir deste diret√≥rio.</p>
                    <p>Se voc√™ tentar executar <code>python manage.py runserver</code> na pasta raiz <code>C:\repos\nafila</code>, receber√° um erro.</p>
                </div>
                
                <p>Ap√≥s iniciar o servidor, voc√™ poder√° acessar o sistema no navegador atrav√©s do endere√ßo:</p>
                <div class="code-block">
                    <a href="http://127.0.0.1:8000/" target="_blank">http://127.0.0.1:8000/</a>
                </div>
            </div>
            
            <!-- Acessando o Admin -->
            <div id="acessar-admin" class="instruction-panel">
                <div class="instruction-header">
                    <span class="step-number">2</span>
                    <h2>Acessando o Painel de Administra√ß√£o</h2>
                </div>
                
                <p>Para configurar o sistema, voc√™ precisar√° acessar o painel de administra√ß√£o do Django:</p>
                
                <ol>
                    <li>No seu navegador, acesse: <a href="http://127.0.0.1:8000/admin/" target="_blank">http://127.0.0.1:8000/admin/</a></li>
                    <li>Fa√ßa login com o usu√°rio e senha de superusu√°rio que voc√™ criou anteriormente</li>
                </ol>
                
                <p>No painel de administra√ß√£o, voc√™ ver√° v√°rias se√ß√µes que permitem gerenciar diferentes aspectos do sistema:</p>
                <ul>
                    <li><strong>Barbearias</strong> - Gerenciar perfis de barbearias</li>
                    <li><strong>Servi√ßos</strong> - Adicionar e editar servi√ßos oferecidos</li>
                    <li><strong>Clientes</strong> - Visualizar e gerenciar clientes cadastrados</li>
                    <li><strong>Entradas Filas</strong> - Gerenciar as entradas na fila de espera</li>
                </ul>
                
                <div class="alert-tip">
                    <h5>üí° Dica</h5>
                    <p>O painel de administra√ß√£o possui um bot√£o de ajuda (√≠cone "?") no canto inferior direito. Clique nele para obter informa√ß√µes contextuais sobre cada se√ß√£o.</p>
                </div>
            </div>
            
            <!-- Criando sua Barbearia -->
            <div id="criar-barbearia" class="instruction-panel">
                <div class="instruction-header">
                    <span class="step-number">3</span>
                    <h2>Criando sua Barbearia</h2>
                </div>
                
                <p>Agora vamos criar o perfil da sua barbearia:</p>
                
                <ol>
                    <li>No painel de administra√ß√£o, clique em "Barbearias"</li>
                    <li>Clique no bot√£o "ADICIONAR BARBEARIA" no canto superior direito</li>
                    <li>Preencha os campos do formul√°rio:
                        <ul>
                            <li><strong>Nome</strong>: Nome da sua barbearia</li>
                            <li><strong>Slug</strong>: Identificador √∫nico para URLs (ser√° gerado automaticamente, mas voc√™ pode editar)</li>
                            <li><strong>Telefone</strong>: N√∫mero de contato da barbearia</li>
                            <li><strong>Endere√ßo</strong>: Endere√ßo f√≠sico da barbearia</li>
                            <li><strong>Hor√°rio de Abertura/Fechamento</strong>: Hor√°rios de funcionamento</li>
                            <li><strong>Dias de Funcionamento</strong>: Lista de dias em que a barbearia est√° aberta, em formato JSON: [0,1,2,3,4,5] onde 0=Segunda e 6=Domingo</li>
                        </ul>
                    </li>
                </ol>
                
                <div class="alert-warning">
                    <h5>‚ö†Ô∏è Formato dos Dias de Funcionamento</h5>
                    <p>O campo "Dias de Funcionamento" deve ser preenchido com uma lista JSON contendo n√∫meros de 0 a 6, onde:</p>
                    <ul>
                        <li>0 = Segunda-feira</li>
                        <li>1 = Ter√ßa-feira</li>
                        <li>2 = Quarta-feira</li>
                        <li>3 = Quinta-feira</li>
                        <li>4 = Sexta-feira</li>
                        <li>5 = S√°bado</li>
                        <li>6 = Domingo</li>
                    </ul>
                    <p>Exemplo para uma barbearia que funciona de segunda a sexta: <code>[0,1,2,3,4]</code></p>
                </div>
            </div>
            
            <!-- Adicionando Servi√ßos -->
            <div id="adicionar-servicos" class="instruction-panel">
                <div class="instruction-header">
                    <span class="step-number">4</span>
                    <h2>Adicionando Servi√ßos</h2>
                </div>
                
                <p>Depois de criar a barbearia, voc√™ precisa adicionar os servi√ßos oferecidos:</p>
                
                <h4>Op√ß√£o 1: Adicionar Servi√ßos na P√°gina da Barbearia</h4>
                <p>Na mesma p√°gina de cria√ß√£o ou edi√ß√£o da barbearia, role at√© a se√ß√£o "Servicos":</p>
                <ol>
                    <li>Clique em "Adicionar outro Servico"</li>
                    <li>Preencha os campos:
                        <ul>
                            <li><strong>Nome</strong>: Nome do servi√ßo (ex: "Corte Masculino")</li>
                            <li><strong>Descri√ß√£o</strong>: Descri√ß√£o opcional do servi√ßo</li>
                            <li><strong>Pre√ßo</strong>: Valor do servi√ßo (use ponto como separador decimal)</li>
                            <li><strong>Dura√ß√£o</strong>: Tempo estimado em minutos (importante para calcular tempos de espera)</li>
                        </ul>
                    </li>
                    <li>Adicione quantos servi√ßos forem necess√°rios</li>
                    <li>Clique em "SALVAR" para salvar a barbearia e seus servi√ßos</li>
                </ol>
                
                <h4>Op√ß√£o 2: Gerenciar Servi√ßos Separadamente</h4>
                <p>Voc√™ tamb√©m pode adicionar servi√ßos pela se√ß√£o "Servi√ßos" do painel de administra√ß√£o:</p>
                <ol>
                    <li>No painel de administra√ß√£o, clique em "Servi√ßos"</li>
                    <li>Clique em "ADICIONAR SERVI√áO"</li>
                    <li>Selecione a barbearia e preencha os detalhes do servi√ßo</li>
                    <li>Clique em "SALVAR"</li>
                </ol>
                
                <div class="alert-tip">
                    <h5>üí° Dica</h5>
                    <p>A dura√ß√£o do servi√ßo √© muito importante, pois √© usada para calcular o tempo estimado de espera para os clientes na fila.</p>
                </div>
            </div>
            
            <!-- Testando o Check-in -->
            <div id="testar-checkin" class="instruction-panel">
                <div class="instruction-header">
                    <span class="step-number">5</span>
                    <h2>Testando o Check-in de Clientes</h2>
                </div>
                
                <p>Agora que sua barbearia e servi√ßos est√£o configurados, vamos testar o processo de check-in:</p>
                
                <ol>
                    <li>Acesse a p√°gina principal do sistema: <a href="http://127.0.0.1:8000/" target="_blank">http://127.0.0.1:8000/</a></li>
                    <li>Voc√™ ver√° sua barbearia listada. Clique em "Ver Detalhes" ou "Entrar na Fila"</li>
                    <li>Se escolheu "Ver Detalhes", agora clique em "Entrar na Fila"</li>
                    <li>Preencha o formul√°rio de check-in:
                        <ul>
                            <li>Nome do cliente</li>
                            <li>Telefone</li>
                            <li>Email (opcional)</li>
                            <li>Selecione um servi√ßo da lista</li>
                        </ul>
                    </li>
                    <li>Clique em "Confirmar Check-in"</li>
                </ol>
                
                <p>Ap√≥s o check-in, voc√™ ser√° redirecionado para a p√°gina de status da fila, onde poder√° ver:</p>
                <ul>
                    <li>Sua posi√ß√£o na fila</li>
                    <li>Tempo estimado de espera</li>
                    <li>Detalhes do servi√ßo selecionado</li>
                    <li>Um bot√£o para cancelar o atendimento, se necess√°rio</li>
                </ul>
                
                <div class="alert-tip">
                    <h5>üí° Dica</h5>
                    <p>Deixe esta janela aberta para ver as atualiza√ß√µes em tempo real quando o status do seu atendimento mudar.</p>
                </div>
            </div>
            
            <!-- Usando o Dashboard -->
            <div id="dashboard" class="instruction-panel">
                <div class="instruction-header">
                    <span class="step-number">6</span>
                    <h2>Usando o Dashboard da Barbearia</h2>
                </div>
                
                <p>O Dashboard √© onde os funcion√°rios da barbearia gerenciam a fila de atendimento:</p>
                
                <ol>
                    <li>Acesse o dashboard da sua barbearia: <code>http://127.0.0.1:8000/b/&lt;slug&gt;/dashboard/</code></li>
                    <li>Substitua <code>&lt;slug&gt;</code> pelo slug da sua barbearia</li>
                    <li>Por exemplo: <a href="http://127.0.0.1:8000/b/minha-barbearia/dashboard/" target="_blank">http://127.0.0.1:8000/b/minha-barbearia/dashboard/</a></li>
                </ol>
                
                <p>No dashboard, voc√™ ver√° tr√™s se√ß√µes principais:</p>
                <ul>
                    <li><strong>Pr√≥ximos Atendimentos</strong> - Clientes aguardando na fila</li>
                    <li><strong>Em Atendimento</strong> - Clientes sendo atendidos no momento</li>
                    <li><strong>Conclu√≠dos Hoje</strong> - Atendimentos finalizados no dia</li>
                </ul>
                
                <p>Para cada cliente na fila, voc√™ pode realizar as seguintes a√ß√µes:</p>
                <ul>
                    <li><strong>Iniciar Atendimento</strong> - Move o cliente para "Em Atendimento"</li>
                    <li><strong>Cancelar</strong> - Cancela o atendimento do cliente</li>
                </ul>
                
                <p>Para clientes em atendimento:</p>
                <ul>
                    <li><strong>Finalizar Atendimento</strong> - Marca o atendimento como conclu√≠do</li>
                </ul>
                
                <div class="alert-tip">
                    <h5>üí° Dica para Barbeiros</h5>
                    <p>Mantenha o dashboard aberto em um tablet ou computador na barbearia para gerenciar a fila facilmente.</p>
                </div>
            </div>
            
            <!-- Atualiza√ß√µes em Tempo Real -->
            <div id="tempo-real" class="instruction-panel">
                <div class="instruction-header">
                    <span class="step-number">7</span>
                    <h2>Atualiza√ß√µes em Tempo Real</h2>
                </div>
                
                <p>O sistema usa WebSockets para proporcionar atualiza√ß√µes em tempo real, sem precisar atualizar a p√°gina:</p>
                
                <h4>Testando as Atualiza√ß√µes em Tempo Real</h4>
                <ol>
                    <li>Abra duas janelas do navegador lado a lado</li>
                    <li>Na primeira janela, acesse o dashboard da barbearia</li>
                    <li>Na segunda janela, fa√ßa check-in como um cliente</li>
                    <li>Observe o cliente aparecer automaticamente no dashboard</li>
                    <li>No dashboard, clique em "Iniciar Atendimento" para este cliente</li>
                    <li>Observe a p√°gina de status do cliente ser atualizada automaticamente</li>
                </ol>
                
                <div class="alert-tip">
                    <h5>üí° Como Funciona</h5>
                    <p>O sistema usa Django Channels para implementar WebSockets, permitindo comunica√ß√£o bidirecional em tempo real entre o servidor e os clientes conectados.</p>
                    <p>Quando o status de um atendimento muda, todos os clientes conectados s√£o notificados automaticamente.</p>
                </div>
            </div>
            
            <!-- Solu√ß√£o de Problemas -->
            <div id="solucao-problemas" class="instruction-panel">
                <div class="instruction-header">
                    <h2>Solu√ß√£o de Problemas Comuns</h2>
                </div>
                
                <div class="accordion" id="troubleshootingAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="heading1">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1" aria-expanded="false" aria-controls="collapse1">
                                Erro: "No such file or directory: manage.py"
                            </button>
                        </h2>
                        <div id="collapse1" class="accordion-collapse collapse" aria-labelledby="heading1" data-bs-parent="#troubleshootingAccordion">
                            <div class="accordion-body">
                                <p>Este erro ocorre quando voc√™ tenta executar o comando <code>python manage.py</code> fora do diret√≥rio correto.</p>
                                <p><strong>Solu√ß√£o:</strong> Certifique-se de estar no diret√≥rio <code>C:\repos\nafila\eutonafila</code> antes de executar comandos Django.</p>
                                <div class="code-block">
                                    cd C:\repos\nafila\eutonafila<br>
                                    python manage.py runserver
                                </div>
                                <p>Ou, mais simples, use o arquivo <code>start_server.bat</code> na raiz do projeto.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="heading2">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2" aria-expanded="false" aria-controls="collapse2">
                                WebSockets n√£o est√£o funcionando
                            </button>
                        </h2>
                        <div id="collapse2" class="accordion-collapse collapse" aria-labelledby="heading2" data-bs-parent="#troubleshootingAccordion">
                            <div class="accordion-body">
                                <p>Se as atualiza√ß√µes em tempo real n√£o est√£o funcionando:</p>
                                <ol>
                                    <li>Verifique se o servidor est√° rodando com suporte a ASGI</li>
                                    <li>Verifique no console do navegador (F12) se h√° erros de conex√£o WebSocket</li>
                                    <li>Tente reiniciar o servidor Django</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="heading3">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3" aria-expanded="false" aria-controls="collapse3">
                                Erro no formato dos "Dias de Funcionamento"
                            </button>
                        </h2>
                        <div id="collapse3" class="accordion-collapse collapse" aria-labelledby="heading3" data-bs-parent="#troubleshootingAccordion">
                            <div class="accordion-body">
                                <p>O campo "Dias de Funcionamento" deve ser uma lista JSON v√°lida.</p>
                                <p><strong>Formato correto:</strong> <code>[0,1,2,3,4]</code> para segunda a sexta</p>
                                <p><strong>Formatos incorretos:</strong></p>
                                <ul>
                                    <li><code>0,1,2,3,4</code> (sem colchetes)</li>
                                    <li><code>[0, 1, 2, 3, 4]</code> (espa√ßos ap√≥s v√≠rgulas s√£o ignorados, mas melhor evitar)</li>
                                    <li><code>"[0,1,2,3,4]"</code> (com aspas extras)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 